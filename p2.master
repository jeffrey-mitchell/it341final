#!/bin/bash
# This script configures the hosts file for the vm
#

#backs up /etc/hosts
#note: running sed on hosts.orig then piping results to host.prep doesn't seem to work
sudo cp /etc/hosts /home/sysadmin/originalfiles/hosts.orig
sudo cp /etc/hosts /home/sysadmin/originalfiles/hosts.prep

#adds comments to hosts
sudo sed -i '3 iinside virtual clients' /home/sysadmin/originalfiles/hosts.prep
sudo sed -i '3 s/^/#/' /home/sysadmin/originalfiles/hosts.prep
sudo sed -i '4 iinside real clients' /home/sysadmin/originalfiles/hosts.prep
sudo sed -i '4 s/^/#/' /home/sysadmin/originalfiles/hosts.prep

#runs helper script that edits hosts
sudo sed -f p2.sed.hosts /home/sysadmin/originalfiles/hosts.prep >/etc/hosts

#moves host.prep to /etc/hosts
#sudo mv /home/sysadmin/originalfiles/hosts.prep /etc/hosts

#restarts networking
#sudo /etc/init.d/networking restart
